<?xml version="1.0" encoding="UTF-8"?>

<!--
    This is the default role : 
    if you specify {D} then the default value will be used.
    The combination of rules must produce all attribute, otherwise
    the attribute won't be set.
    
    You can specify expire as a point in time...or as expireAfter
    which is a duration.
    
    So for example :
    
    <rule>
        <local>
            <user name="{D}" email="{D}" expire="{D}"/>
            <domain id="{D}"/>
            <role names="{D}"/>
        </local>
    </rule>
    
    will expand to the following...
-->

<rules xmlns="http://docs.rackspace.com/identity/api/ext/MappingRules"
       xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion">
    <rule>
        <local>
            <user name="{0}" email="{1}" expire="{2}"/>
            <domain id="{3}"/>
            <role names="{4}"/>
        </local>
        <remote>
            <assertion path="/saml2:Assertion/saml2:Subject/saml2:NameID"/>
            <attribute name="email"/>
            <assertion path="/saml2:Assertion/saml2:Subject/saml2:SubjectConfirmation/saml2:SubjectConfirmationData/@NotOnOrAfter"/>
            <attribute name="domain"/>
            <attributes name="roles"/>
        </remote>
    </rule>
</rules>
