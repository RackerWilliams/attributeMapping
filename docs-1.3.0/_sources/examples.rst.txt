==========================
Attribute Mapping Examples
==========================

.. See index.rst for info on attribmap, saml, and map directives.

Working with defaults
=====================


.. highlight:: xml
   :linenothreshold: 5


.. literalinclude::  ../../../../core/target/map-results/defaults/sample_assert.xml/sample_assert.xml
   :linenos: 


.. highlight:: yaml
   :linenothreshold: 5


.. literalinclude::  ../../../../core/src/test/resources/tests/mapping-tests/defaults/maps/defaults.yaml
   :linenos: 

Resulting Attributes:

+--------+--------------------------+
| name   | john.doe                 |
+--------+--------------------------+
| email  | no-reply@rackspace.com   |
+--------+--------------------------+
| expire | 2013-11-17T16:19:06.298Z |
+--------+--------------------------+
| domain | 323676                   |
+--------+--------------------------+
| roles  | - nova:admin             |
+--------+--------------------------+

Accessing default from a different field:
-----------------------------------------


.. highlight:: yaml
   :linenothreshold: 5


.. literalinclude::  ../../../../core/src/test/resources/tests/mapping-tests/defaults2/maps/defaults2.yaml
   :linenos: 

Resulting Attributes:

+--------+--------------------------+
| name   | john.doe                 |
+--------+--------------------------+
| email  | john.doe@rackspace.com   |
+--------+--------------------------+
| expire | 2013-11-17T16:19:06.298Z |
+--------+--------------------------+
| domain | 323676                   |
+--------+--------------------------+
| roles  | - nova:admin             |
+--------+--------------------------+

More complex example with multiple substitutions
------------------------------------------------


.. highlight:: yaml
   :linenothreshold: 5


.. literalinclude::  ../../../../core/src/test/resources/tests/mapping-tests/defaults3/maps/defaults3.yaml
   :linenos: 

Resulting Attributes:

+--------+------------------------------------------+
| name   | john.doe                                 |
+--------+------------------------------------------+
| email  | john.doe <john.doe@323676.rackspace.com> |
+--------+------------------------------------------+
| expire | 2013-11-17T16:19:06.298Z                 |
+--------+------------------------------------------+
| domain | 323676                                   |
+--------+------------------------------------------+
| roles  | - nova:admin                             |
+--------+------------------------------------------+

Mixing in non-default attributes
--------------------------------


.. highlight:: yaml
   :linenothreshold: 5


.. literalinclude::  ../../../../core/src/test/resources/tests/mapping-tests/defaults4/maps/defaults4-s.yaml
   :linenos: 

Resulting Attributes:

+--------+------------------------------------------+
| name   | john.doe                                 |
+--------+------------------------------------------+
| email  | John Doe <john.doe@323676.rackspace.com> |
+--------+------------------------------------------+
| expire | 2013-11-17T16:19:06.298Z                 |
+--------+------------------------------------------+
| domain | 323676                                   |
+--------+------------------------------------------+
| roles  | - nova:admin                             |
+--------+------------------------------------------+

Working with exirations
=======================

Hard coding a 2 hour expiration date
------------------------------------


.. highlight:: xml
   :linenothreshold: 5


.. literalinclude::  ../../../../core/target/map-results/mapping-rule-exp/sample_assert.xml/sample_assert.xml
   :linenos: 


.. highlight:: yaml
   :linenothreshold: 5


.. literalinclude::  ../../../../core/src/test/resources/tests/mapping-tests/mapping-rule-exp/maps/mapping-rule-exp.yaml
   :linenos: 

Resulting Attributes:

+--------+-------------------------------+
| name   | john.doe                      |
+--------+-------------------------------+
| email  | no-reply@rackspace.com        |
+--------+-------------------------------+
| expire | 2017-10-02T16:47:51.429-05:00 |
+--------+-------------------------------+
| domain | 323676                        |
+--------+-------------------------------+
| roles  | - nova:admin                  |
+--------+-------------------------------+

Working with lists
==================

Black lists
-----------

White lists
-----------
